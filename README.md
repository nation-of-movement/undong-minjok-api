

# 🏋️ 운동의 민족 (Undong Minjok)

<div align="center">
	<img width="1632" height="666" alt="스크린샷 2025-12-12 161837" src="https://github.com/user-attachments/assets/58620b31-31a0-47e2-89dc-3f52817f9750" />
</div>


---
## 목차 (Table of Contents)

1. [👩‍👧‍👦 멤버 소개](#-1-멤버-소개)  
2. [⚒️ 서비스 소개](#️-2-서비스-소개)  
3. [🚀 기술 스택](#-3-기술-스택)  
4. [🗂️ 프로젝트 산출물](#️-4-프로젝트-산출물)  
5. [⚠️ Trouble Shooting](#️-5-trouble-shooting)  



## 📂 프로젝트 파일 구조

---

## 👩‍👧‍👦 1. 멤버 소개

<div align="center">

| 성현제 | 이민욱 | 유한세 | 이상도 | 정혜인 |
|--------|--------|--------|--------|--------|
|<img width="150" height="150" src = "https://github.com/user-attachments/assets/212aea25-7874-4cd3-b83f-e28c5341e451">| <img width="150" height="150" src="https://github.com/user-attachments/assets/065dbb9f-6071-4c22-a057-18b18b9439e4" />| <img width="150" height="150" src="https://github.com/user-attachments/assets/8797628c-5089-4809-bfc5-7cd60d8bea7d" />|<img width="150" height="150" src="https://github.com/user-attachments/assets/31ae06b1-b948-4a01-bee5-8ea56cde07c2" /> | <img width="150" height="150" alt="KakaoTalk_20251105_144003874" src="https://github.com/user-attachments/assets/31ec91f2-c66c-4b37-ad28-2d4075091f24" />|
</div>

---
## ⚒️ 2. 서비스 소개

**운동의 민족**은
운동을 잘하는 사람들이 **1달치 운동 루틴 템플릿**을 제작·판매하고,
일반 사용자들은 이를 구매해 **운동 플래너와 캘린더에 바로 적용**할 수 있는
**운동 콘텐츠 커머스 + 운동 관리 플랫폼**입니다.

기존 운동 앱이 단순 기록에 머물렀다면,
운동의 민족은 **운동 지식을 콘텐츠로 거래하는 생태계**를 만드는 것을 목표로 합니다.


### 🚀 서비스 한 줄 요약

* ✅ **운동 초보자** → 전문가 루틴을 구매해 그대로 따라하기
* ✅ **운동 고수/트레이너** → 운동 지식을 판매해 수익 창출
* ✅ **모든 사용자** → 계획·기록을 한 곳에서 관리


### 🎯 핵심 가치 (Vision)

* **운동을 몰라도 시작할 수 있는 서비스**
* **운동 잘하는 사람에게 수익 구조 제공**
* **성장을 눈으로 확인하는 기록 중심 경험**


### 🧩 주요 기능 소개


<details>
<summary><strong>① 템플릿 마켓 (운동 콘텐츠 커머스)</strong></summary>

### 📦 기능 설명

운동 고수, 트레이너, 헬창들이
**1달 단위 운동 루틴 템플릿**을 제작하여 공유·판매하는 마켓입니다.

### ✅ 주요 기능

* 운동 템플릿 등록 / 수정 / 삭제
* 가격 설정 (무료 / 유료)
* 템플릿 상세 조회 및 하루 분량 미리보기
* 템플릿 검색 (이름 기반)
* 템플릿 추천
* 템플릿 구매
* 내 구매 목록 / 내 판매 목록 조회

### 💰 비즈니스 모델

```
템플릿 판매 수익 = 판매 금액 - 플랫폼 커미션
```

</details>


<details>
<summary><strong>② 운동 플래너 & 기록</strong></summary>

### 🗓️ 기능 설명

구매한 템플릿을 **캘린더에 자동 적용**하고
실제 운동 수행 내역을 기록할 수 있는 기능입니다.

### ✅ 주요 기능

* 월간 / 주간 운동 캘린더 조회
* 템플릿 기반 자동 운동 계획 생성
* 운동 계획 등록 / 삭제
* 운동 기록 작성 (사진, 세트, 횟수, 무게, 시간)
* 운동 기록 수정 / 삭제
* 운동 기록 상세 조회

</details>

<details>
<summary><strong>③ 결제 & 포인트 시스템</strong></summary>

### 💳 기능 설명

**토스페이먼츠 기반 포인트 시스템**으로
템플릿 구매 및 판매 수익을 관리합니다.

### ✅ 주요 기능

* 포인트 충전
* 템플릿 구매
* 포인트 환불 (판매자 수익 정산)
* 포인트 내역 조회 (충전 / 결제 / 판매 / 환불)
* 보유 포인트 조회

</details>

### 👥 타깃 사용자

| 유형           | 설명                        |
| ------------ | ------------------------- |
| 운동 초보자       | 무엇을 해야 할지 몰라 루틴이 필요한 사용자  |
| 운동 중급자       | 기록·인바디·진행 상황을 관리하고 싶은 사용자 |
| 운동 고수 / 트레이너 | 운동 루틴을 제작·판매하고 싶은 사용자     |
| 운동 다이어리 사용자  | 운동 기록을 남기며 성취감을 얻고 싶은 사용자 |


### ✨ 서비스 핵심 차별점 (USP)

* ✅ **운동 템플릿을 사고파는 구조**
* ✅ **1달 단위로 구조화된 루틴 설계**
* ✅ **운동 계획 + 기록 통합**
* ✅ **운동 전문가 중심의 창작자 생태계**


### 🎯 프로젝트 목표

* 운동 루틴 고민 없이 **쉽게 시작**
* 계획과 기록을 **한 번에 관리**
* 운동 성장 과정을 **시각적으로 확인**
* 운동 지식을 **수익으로 연결**
* 플랫폼은 **수수료 기반 BM**으로 지속 성장


---

## 🚀 3. 기술 스택

### 🚀 Stacks
🔹 Frontend
<div align=center>
	<img src="https://img.shields.io/badge/Vue.js-4FC08D?style=for-the-badge&logo=vuedotjs&logoColor=white"/>
<img src="https://img.shields.io/badge/JavaScript-323330?style=for-the-badge&logo=javascript&logoColor=F7DF1E"/>
<img src="https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&logo=html5&logoColor=white"/>
<img src="https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=css3&logoColor=white"/>
<img src="https://img.shields.io/badge/Vite-646CFF?style=for-the-badge&logo=vite&logoColor=white"/>
<img src="https://img.shields.io/badge/Pinia-FFD700?style=for-the-badge&logo=pinia&logoColor=black"/>
<img src="https://img.shields.io/badge/Vue_Router-4FC08D?style=for-the-badge&logo=vue.js&logoColor=white"/>
<img src="https://img.shields.io/badge/Axios-5A29E4?style=for-the-badge&logo=axios&logoColor=white"/>
   <br>
</div>

🔹 Backend
<div align=center>
	<img src="https://img.shields.io/badge/Java_17-007396?style=for-the-badge&logo=java&logoColor=white"/>
<img src="https://img.shields.io/badge/Spring_Boot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white"/>
<img src="https://img.shields.io/badge/Spring_Security-6DB33F?style=for-the-badge&logo=springsecurity&logoColor=white"/>
<img src="https://img.shields.io/badge/JPA(Hibernate)-59666C?style=for-the-badge"/>
<img src="https://img.shields.io/badge/QueryDSL-4479A1?style=for-the-badge"/>
<img src="https://img.shields.io/badge/JWT-000000?style=for-the-badge&logo=jsonwebtokens&logoColor=white"/>
   <br>
</div>

🔹DataBase
<div align=center>
  <img src="https://img.shields.io/badge/MariaDB-003545?style=for-the-badge&logo=mariadb&logoColor=white"/>
  <img src="https://img.shields.io/badge/Redis-DC382D?style=for-the-badge&logo=redis&logoColor=white"/>
 <br>
</div>
<br>
🔹Infra/DevOps
<div align=center>
  <img src="https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white"/>
<img src="https://img.shields.io/badge/Kubernetes-326CE5?style=for-the-badge&logo=kubernetes&logoColor=white"/>
<img src="https://img.shields.io/badge/Argo_CD-FE4C1C?style=for-the-badge&logo=argo&logoColor=white"/>
  <img src="https://img.shields.io/badge/Jenkins-D24939?style=for-the-badge&logo=jenkins&logoColor=white"/>
  <img src="https://img.shields.io/badge/Nginx-009639?style=for-the-badge&logo=nginx&logoColor=white"/>
  <img src="https://img.shields.io/badge/Linux(Ubuntu)-E95420?style=for-the-badge&logo=ubuntu&logoColor=white"/>
<br>
</div>
<br>
<br>

### ⚒️ Tools
<div align=center>
  <img src="https://img.shields.io/badge/HeidiSQL-2C3E50?style=for-the-badge"/>
  <img src="https://img.shields.io/badge/ERD_Cloud-2ECC71?style=for-the-badge"/>
  <img src="https://img.shields.io/badge/IntelliJ_IDEA-000000?style=for-the-badge&logo=intellijidea&logoColor=white"/>
  <img src="https://img.shields.io/badge/VS_Code-007ACC?style=for-the-badge&logo=visualstudiocode&logoColor=white"/>
  <img src="https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white"/>
  <img src="https://img.shields.io/badge/Postman-FF6C37?style=for-the-badge&logo=postman&logoColor=white"/>
  <img src="https://img.shields.io/badge/Docker_Desktop-2496ED?style=for-the-badge&logo=docker&logoColor=white"/>
<br>
</div>
<br>
<br>

### 👥  Collaboration      
<div align=center>
   <img src="https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white"/>
  <img src="https://img.shields.io/badge/Git-181717?style=for-the-badge&logo=git&logoColor=white"/>
  <img src="https://img.shields.io/badge/GitHub_Pull_Request-2088FF?style=for-the-badge"/>
  <img src="https://img.shields.io/badge/Notion-000000?style=for-the-badge&logo=notion&logoColor=white"/>
  <img src="https://img.shields.io/badge/Figma-F24E1E?style=for-the-badge&logo=figma&logoColor=white"/>
  <img src="https://img.shields.io/badge/Discord-5865F2?style=for-the-badge&logo=discord&logoColor=white"/>
<br>
</div>

---

## 🗂️ 4. 설계 문서

- ### 🕖 WBS 및 Task tracker **(Work Breakdown Structure)**

  WBS를 자세히 보려면 [여기](https://www.notion.so/2bc0b8a09a7680d1a3b4e7640ba15cb9?v=2bc0b8a09a7681fcb1b6000c720c82db&source=copy_link)를 클릭하세요 <br>
  작업 트래커를 자세히 보려면 [여기](https://www.notion.so/2be0b8a09a768094b73fdc7cf4d0c3e9?source=copy_link)를 클릭하세요

  <details> <summary> WBS</summary>
  <img width="1310" height="785" alt="Image" src="https://github.com/user-attachments/assets/e5bde1ad-5158-4867-93b5-dc5919ff4b2e" />
  </details>
  <details> <summary> Task Tracker</summary>
  <img width="1310" height="785" alt="Image" src="https://github.com/user-attachments/assets/e5bde1ad-5158-4867-93b5-dc5919ff4b2e" />
  </details>


- ### 📚 요구사항 명세서
  요구사항 명세서를 자세히 보려면 [여기](https://www.notion.so/2bc0b8a09a7680d1a3b4e7640ba15cb9?v=2bc0b8a09a7681fcb1b6000c720c82db&source=copy_link)를 클릭하세요 <br>

  <details> <summary> 요구사항 명세서 </summary>
  <img width="1510" height="1162" alt="요구사항명세서" src="https://github.com/user-attachments/assets/4708dd78-8183-4f53-ad45-f1c968664cd4" />
  </details>

- ### 🗺️ ERD **(Entity Relationship Diagram)**
  ERD를 자세히 보려면 [여기](https://www.notion.so/2bc0b8a09a7680d1a3b4e7640ba15cb9?v=2bc0b8a09a7681fcb1b6000c720c82db&source=copy_link)를 클릭하세요 <br>

  <details> <summary> ERD </summary>
    <img width="2780" height="1152" alt="erd" src="https://github.com/user-attachments/assets/915f26b6-16fe-44a4-a1be-43f4934057fc" />
  </details>
  
- ### 🖼️ 화면 설계서
  화면설계서를 자세히 보려면 [여기](https://www.figma.com/design/ExKGJzHttaJ62kyQO2CyOB/%EC%9A%B4%EB%8F%99%EC%9D%98-%EB%AF%BC%EC%A1%B1?node-id=0-1&t=g6XKFEi7a5AejhTH-1)를 클릭하세요 <br>

- ### 📋 API 명세서 
  <details> <summary> API 명세서 </summary>
    <img width="1612" height="3909" alt="screencapture-localhost-8888-swagger-ui-index-html-2025-12-12-17_59_47" src="https://github.com/user-attachments/assets/0964287e-bf36-4ac7-925d-61f405fbc3d6" />
  </details>
  
- ### ▶️ 기능 수행 테스트 결과
  <details> <summary>로그인, 회원가입 </summary>
	  <strong> 회원가입 </strong>
	  <p>
	  <img
	    src="https://github.com/user-attachments/assets/d4c05b8a-a137-4919-a99c-4187a27b7d1d"
	    width="800"
	  />
	</p>
	  <strong> 로그인 </strong>
	  <p>
	  <img
	    src="https://github.com/user-attachments/assets/6913a652-f879-44fa-8b2d-56843c6297e6"
	    width="800"
	  />
	</p>
	  
  </details>

  <details> <summary>마이페이지 </summary>
	  <strong> 프로필 수정 </strong>
	<p>
	  <img
	    src="https://github.com/user-attachments/assets/4679d199-cae3-4522-91d5-85d2cd224712"
	    width="800"
	  />
	</p>
	<strong> 마이페이지 조회 </strong>
	<p>
	  <img
	    src="https://github.com/user-attachments/assets/21ff2c71-9ea2-40b6-9e07-db786fd36687"
	    width="800"
	  />
	</p>

  </details>

  <details> <summary>템플릿 </summary>
	   <strong> 템플릿 생성하기 </strong>
	<p>
	  <img
	    src="https://github.com/user-attachments/assets/15faeae4-c7fa-4e2f-a55f-4e64f89e23bc"
	    width="800"
	  />
	</p>

	<strong> 템플릿 수정하기 </strong>
	<p>
	  <img
	    src="https://github.com/user-attachments/assets/1f3e50b7-c0dc-47bf-b509-1151b515ec68"
	    width="800"
	  />
	</p>

  </details>

  <details> <summary>운동 기록장 </summary>
  	<strong> 템플릿 보관함 저장</strong>
	<p>
	  <img
	    src="https://github.com/user-attachments/assets/0a5d34c0-510c-4ce5-a2e1-9f60ab8e699a"
	    width="800"
	  />
	</p>

	 <strong> 템플릿 적용하기 </strong>
	<p>
	  <img
	    src="https://github.com/user-attachments/assets/b8c51d29-529e-44d2-a828-c17d9490bcd9"
	    width="800"
	  />
	</p>

  <strong> 운동 기록하기 </strong>
	<p>
	  <img
	    src="https://github.com/user-attachments/assets/8fb1534b-3a46-42ec-84c9-a0476361bb83"
	    width="800"
	  />
	</p>

  <strong> 템플릿 삭제하기 </strong>
	<p>
	  <img
	    src="https://github.com/user-attachments/assets/6e33e748-61fe-40dc-acad-de55bb7daaee"
	    width="800"
	  />
	</p>
	</details>


	<details>
	<summary>결제</summary>
	
	<strong>포인트 충전</strong>
	
	![Image](https://github.com/user-attachments/assets/ffa30d24-ead7-4465-8bf1-1b47456d3959)
	
	<strong>포인트 출금</strong>
	
	![Image](https://github.com/user-attachments/assets/f1b44f82-2cdb-4946-91f6-3af161ba24fb)
	
</details>

---

## 🔁 5. 배포 문서
- ### 아키텍처 구조
<img width="2481" height="2338" alt="Image" src="https://github.com/user-attachments/assets/3e5a352b-f62b-45e9-a6d2-2e680d7555c6" />

<h2>Dockerfile</h2>
<details> 

  <summary><strong>Backend Dockerfile (Spring Boot)</strong></summary>


``` YML

FROM eclipse-temurin:21-jdk-alpine

WORKDIR /app

ARG JAR_FILE=build/libs/*.jar
COPY ${JAR_FILE} app.jar

EXPOSE 8888

ENTRYPOINT ["java", "-jar", "/app/app.jar"]

```
</details> <details> <summary><strong>Frontend Dockerfile (Nginx)</strong></summary>
	
``` YML

FROM nginx:alpine
COPY dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]

```

</details>
<br>

<h2>Jenkins Pipeline Script</h2>
<details>
<summary><strong> Backend Pipeline Script </strong></summary>

```groovy

pipeline {
    agent any

    tools {
        gradle 'gradle'
        jdk 'openJDK21'
    }

    environment {
        DOCKERHUB_CREDENTIALS = credentials('DOCKERHUB_PASSWORD')
        GITHUB_URL = 'https://github.com/nation-of-movement/undong-minjok-api.git'
        IMAGE_TAG = "${env.BUILD_NUMBER}"
    }

    stages {
        stage('Preparation') {
            steps {
                script {
                    if (isUnix()) {
                        sh 'docker --version'
                    } else {
                        bat 'docker --version'
                    }
                }
            }
        }
        stage('Source Build') {
            steps {
                git branch: 'develop', url: "${env.GITHUB_URL}"
                dir('undongminjok-api') {
                    script {
                        if (isUnix()) {
                            sh "chmod +x ./gradlew"
                            sh "./gradlew clean build"
                        } else {
                            bat "gradlew.bat clean build"
                        }
                    }
                }
            }
        }
        stage('Container Build and Push') {
            steps {
                dir('undongminjok-api') {
                    script {
                        withCredentials([usernamePassword(credentialsId: 'DOCKERHUB_PASSWORD', usernameVariable: 'DOCKER_USER', passwordVariable: 'DOCKER_PASS')]) {
                            if (isUnix()) {
                                sh "docker build -t ${DOCKER_USER}/undong-minjok-api:${IMAGE_TAG} ."
                                sh "docker login -u ${DOCKER_USER} -p ${DOCKER_PASS}"
                                sh "docker push ${DOCKER_USER}/undong-minjok-api:${IMAGE_TAG}"
                            } else {
                                bat "docker build -t ${DOCKER_USER}/undong-minjok-api:${IMAGE_TAG} ."
                                bat "docker login -u %DOCKER_USER% -p %DOCKER_PASS%"
                                bat "docker push ${DOCKER_USER}/undong-minjok-api:${IMAGE_TAG}"
                            }
                        }
                    }
                }
            }
        }
    }

    post {
        always {
            script {
                if (isUnix()) {
                    sh 'docker logout'
                } else {
                    bat 'docker logout'
                }
            }
        }
        success {
            withCredentials([string(credentialsId: 'discord', variable: 'DISCORD')]) {
                discordSend(
                    description: """
                    **빌드 성공!** :tada:
                    
                    **제목**: ${currentBuild.displayName}
                    **결과**: :white_check_mark: ${currentBuild.currentResult}
                    **실행 시간**: ${currentBuild.duration / 1000}s
                    **링크**: [빌드 결과 보기](${env.BUILD_URL})
                    """,
                    title: "${env.JOB_NAME} 빌드 성공!", 
                    webhookURL: "$DISCORD"
                )
            }
        }
        failure {
            withCredentials([string(credentialsId: 'discord', variable: 'DISCORD')]) {
                discordSend(
                    description: """
                    **빌드 실패!** :x:
                    
                    **제목**: ${currentBuild.displayName}
                    **결과**: :x: ${currentBuild.currentResult}
                    **실행 시간**: ${currentBuild.duration / 1000}s
                    **링크**: [빌드 결과 보기](${env.BUILD_URL})
                    """,
                    title: "${env.JOB_NAME} 빌드 실패!", 
                    webhookURL: "$DISCORD"
                )
            }
        }
    }
}

```

</details> <details> <summary><strong>Frontend Pipeline Script </strong></summary>

```groovy

pipeline {
    agent any

    tools {
        nodejs 'node24'
    }

    environment {
        DOCKERHUB_CREDENTIALS = credentials('DOCKERHUB_PASSWORD')
        GITHUB_URL = 'https://github.com/nation-of-movement/undong-minjok-client.git'
        IMAGE_TAG = "${env.BUILD_NUMBER}"
    }

    stages {

        stage('Preparation') {
            steps {
                script {
                    if (isUnix()) {
                        sh 'docker --version'
                        sh 'node -v'
                        sh 'npm -v'
                    } else {
                        bat 'docker --version'
                        bat 'node -v'
                        bat 'npm -v'
                    }
                }
            }
        }

        stage('Source Build') {
            steps {
                git branch: 'develop', url: "${env.GITHUB_URL}"

                dir('undong-minjok-client') {
                    script {
                        if (isUnix()) {
                            sh 'npm install'
                            sh 'npm run build:dev'
                        } else {
                            bat 'npm install'
                            bat 'npm run build:dev'
                        }
                    }
                }
            }
        }

        stage('Container Build and Push') {
            steps {
                dir('undong-minjok-client') {
                    script {
                        withCredentials([usernamePassword(
                            credentialsId: 'DOCKERHUB_PASSWORD',
                            usernameVariable: 'DOCKER_USER',
                            passwordVariable: 'DOCKER_PASS'
                        )]) {
                            if (isUnix()) {
                                sh "docker build -t ${DOCKER_USER}/undong-minjok-client:${IMAGE_TAG} ."
                                sh "echo $DOCKER_PASS | docker login -u $DOCKER_USER --password-stdin"
                                sh "docker push ${DOCKER_USER}/undong-minjok-client:${IMAGE_TAG}"
                            } else {
                                bat "docker build -t ${DOCKER_USER}/undong-minjok-client:${IMAGE_TAG} ."
                                bat "docker login -u %DOCKER_USER% -p %DOCKER_PASS%"
                                bat "docker push ${DOCKER_USER}/undong-minjok-client:${IMAGE_TAG}"
                            }
                        }
                    }
                }
            }
        }
    }

    post {
        always {
            script {
                if (isUnix()) {
                    sh 'docker logout || true'
                } else {
                    bat 'docker logout || true'
                }
            }
        }

        success {
            withCredentials([string(credentialsId: 'discord-client', variable: 'DISCORD')]) {
                discordSend(
                    description: """
                    **프론트 빌드 성공!** 🎉

                    **빌드 번호**: ${env.BUILD_NUMBER}
                    **결과**: ${currentBuild.currentResult}
                    **시간**: ${currentBuild.duration / 1000}s
                    **링크**: [Jenkins Build](${env.BUILD_URL})
                    """,
                    title: "🎉 Fronend Build Success!",
                    webhookURL: "$DISCORD"
                )
            }
        }

        failure {
            withCredentials([string(credentialsId: 'discord-client', variable: 'DISCORD')]) {
                discordSend(
                    description: """
                    **프론트 빌드 실패!** ❌

                    **빌드 번호**: ${env.BUILD_NUMBER}
                    **결과**: ${currentBuild.currentResult}
                    **시간**: ${currentBuild.duration / 1000}s
                    **링크**: [Jenkins Build](${env.BUILD_URL})
                    """,
                    title: "❌ Frontend Build Failed!",
                    webhookURL: "$DISCORD"
                )
            }
        }
    }
}

```

</details>

<br>


---
- ### CI/CD 테스트 결과 화면

🚀 CI (Continuous Integration) – GitHub 코드 변경을 트리거로 Jenkins 파이프라인이 실행되어 Docker 이미지를 생성하고 Docker Hub에 업로드합니다.

![Image](https://github.com/user-attachments/assets/dc2876b7-dd45-48f1-b9dd-cb3a0d120fea)

🚢 CD (Continuous Deployment) – Docker Image 버전 변경을 Argo CD가 감지하여 Kubernetes 클러스터에 자동 배포합니다.

![Image](https://github.com/user-attachments/assets/40588e91-54b8-4306-9bdc-f97e90653db8)

---
## 🎅🏻 6. 회고

---
## ⚠️ 7. Trouble Shooting
<details>
<summary>💳 포인트 결제 트러블 슈팅</summary>

**문제**  
토스 페이먼츠 결제 위젯 방식을 사용해 포인트 결제 기능을 구현했으나,  
백엔드 연동 과정에서 400, 401 에러가 지속적으로 발생하며  
결제 요청이 토스 서버로 전달되지 않는 문제가 발생했습니다.

**해결**  
결제 위젯 방식의 구조적 한계를 고려해  
토스 결제창 방식으로 전환했습니다.

토스에서 결제 승인을 먼저 처리한 후,  
백엔드에서 결제 결과 검증 및 포인트 적립 후처리를 담당하도록 구조를 변경하여  
문제를 해결했습니다.

</details>

<details>
<summary> 📁파일 관련 트러블 슈팅 </summary>

**백엔드: 파일 업로드와 데이터베이스 트랜잭션 불일치 해결**

운동 기록 등록 과정에서 이미지 파일 업로드와 데이터베이스 저장을 하나의 요청으로 처리하면서,
트랜잭션 실패 시 데이터는 롤백되지만 이미지 파일이 서버 파일 시스템에 남는 문제가 발생했다.
이는 데이터베이스 트랜잭션이 파일 시스템과 같은 외부 리소스를 직접 관리하지 못하기 때문에 생긴 구조적 한계였다.

이를 해결하기 위해 백엔드에서는 TransactionSynchronizationManager를 활용한
보상 트랜잭션 패턴을 적용했다.
트랜잭션 종료 시점을 감지하여 커밋 성공 시에는 기존 이미지 파일을 정리하고,
롤백이 발생한 경우에는 새로 업로드된 파일을 삭제하도록 설계했다.

이 방식으로 예외 상황에서도 서버에 불필요한 파일이 남지 않도록 개선했으며,
데이터베이스와 파일 시스템 간의 상태 불일치를 안정적으로 방지할 수 있었다.

**프론트엔드: 이미지 API 경로 하드코딩 제거 및 환경 분리**

프론트엔드에서는 이미지 조회 시 API 서버 주소를 localhost로 하드코딩하고 있어,
개발 환경에서는 정상 동작하지만 배포 환경에서는 코드 수정이 필요한 문제가 있었다.
이로 인해 프론트엔드 빌드 결과가 특정 서버 주소에 종속되는 구조였다.

이를 개선하기 위해 API 서버 주소를 환경 변수로 분리하고,
환경별(development, production) 설정에 따라 동적으로 이미지 경로를 생성하도록 수정했다.
이로써 코드 수정 없이도 개발·운영 환경을 구분할 수 있는 구조를 만들었다.

해당 개선을 통해 프론트엔드는 배포 환경 변화에 유연하게 대응할 수 있게 되었고,
백엔드에서 제공하는 이미지 경로를 안정적으로 활용할 수 있는 구조를 완성했다.

</details>


---
